---
    apiVersion: networking.istio.io/v1alpha3
    kind: Gateway
    metadata:
      name: prometheus-gateway
    spec:
      selector:
        istio: ingressgateway
      servers:
        - port:
            number: 80
            name: http
            protocol: HTTP
          hosts:
            - "*.prometheus"
    # Uncomment below to enable HTTPS
    #      tls:
    #        httpsRedirect: true
    #    - port:
    #        number: 443
    #        name: https
    #        protocol: HTTPS
    #      hosts:
    #        - "*"
    #      tls:
    #        mode: PASSTHROUGH
    ---
    apiVersion: networking.istio.io/v1alpha3
    kind: VirtualService
    metadata:
      name: prometheus-server
    spec:
      hosts:
      - "*.prometheus"
      gateways:
        - prometheus-gateway
      http:
      - match:
        - uri:
            exact: /
        route:
        - destination:
            host: prometheus-k8s.monitoring.svc.cluster.local
            port:
              number: 9090